# php

Le code s'insère directement dans des fichiers html, ils vont constituer la partie dynamique des pages.
L'extension sera cependant .php pour ce type de fichier.
Fichier stocké dans le dossier/var/www pour que le php s'exécute.

## fichiers

balise php : <?php /* Le code PHP se met ici */ ?>
affichage texte : <?php echo "Ceci est du texte"; ?> peut afficher des balises
decoupage d'un html en portions :
	<?php include("mapage.php"); ?> le .php contiendra le code html/php que l'on souhaite
	par exemple un menu.php qui sera inclus dans toutes les pages
	il peut etre utile de placer les php qu'on inclut dans un dossier includes/

## bases

types : int float bool (true ou false) string NULL
variable : $nom_variable = val; (declaration et affectation), on utilise tjr une var avec $
	une var peut etre placée dans un string avec guillemets doubles
arithmetique : + - * / % ++ --
conditions : if(){}elseif(){}else(){} switch(){case:break;default: } cond ? then : else;
boucles : while(){} for( ; ; ){}
fonctions :
	appel : même appel que lang classiques, fct sur string, date(H, i, d, m, Y) recupere la date
	crea : function nomfct($var1, $var2, ...){}
tableaux : 2 types
	tableau numeroté : $montab = array (val1, val2, ...);, on peut créer case par case par affectation
	tableau associatif : $montab = array ( cle => val, cle2 => val2, ...); crea case par case possible
	parcours : <?php foreach($tab as $elt){ echo $elt . '<br />'; } ?>, for(;;){}, print_r($tab); affichage rapide
	recherche : array_key_exists(); in_array(); array_search(); : pour récupérer la clé d'une valeur dans l'array

##transmission de donnees

avec l'URL : cible.php?param1=valeur1&param2=valeur2&...
<a href="=page.php?param1=valeur1&param2=valeur2&amp...">Lien en bleu</a>
On ecrit &amp au lieu de & dans la balise html
On récupère dana la page cible les parmètres avec $_GET['nom param']
Il faut controler la presence et la valeur des parametres pour avoir un site securise
ww
avec formulaire : differents formulaires, voir html
<form action="cible.php" method="post">
<p>
    <input type="text" name="prenom" />
    <input type="submit" value="Valider" />
</p>
</form>
 $_POST['pseudo'] dans cible.php pour recup et traiter la donnée
htmlspecialchars($_POST[]), ne pas executer le html envoyé dans un form. strip_tags est ok aussi

## php et mySQL

DATE : stocke une date au format AAAA-MM-JJ (Année-Mois-Jour) ; plus fonctions
connexion php et BD : php.ini fihcier de config de lamp
	pdo_mysql.default_socket = /opt/lampp/var/mysql/mysql.sock
	display_errors = On
	<?php $bdd = new PDO('mysql:host=localhost;dbname=nomBD;charset=utf8', 'root', 'user'); ?>

lire des données :
	$reponse = $bdd->query('Tapez votre requête SQL ici'); reponse = retour de la requete
	$donnee = $reponse->fetch(); donnee = première ligne de reponse
	while ($donnee = $reponse->fetch()) parcourt de la table reponse
	$donnees['nomAttribut'], retourne la valeur de l'attribut pour la donnée concernée
	$reponse->closeCursor(); quadn on a fini de traiter la requete

écrire des données : insert update delete
	$bdd->exec(' requete de modification')